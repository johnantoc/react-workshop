(this["webpackJsonpdiagnal-react-workshop"]=this["webpackJsonpdiagnal-react-workshop"]||[]).push([[0],{26:function(e,t,c){},30:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(6),s=c.n(r),i=c(4),l=(c(26),c(3)),o="https://test.create.diagnal.com/data",u="https://test.create.diagnal.com/images",d="https://test.create.diagnal.com/images/placeholder_for_missing_posters.png",f=c(1);function b(e){var t=e.img;return Object(f.jsx)("img",{src:"".concat(u,"/").concat(t),alt:"back icon",className:"w-5 transition duration-500 ease-in-out transform hover:scale-110"})}b.defaultProps={img:""};var j=b,h=c(14),m=c.n(h);function O(e){var t=e.focusOut,c=e.searchKeyHandler,n=Object(a.useState)(""),r=Object(l.a)(n,2),s=r[0],i=r[1],o=Object(a.useCallback)(m()(c,300),[]);return Object(f.jsx)("input",{value:s,onChange:function(e){var t=e.target.value;i(t),o(t)},onBlur:t,className:"w-11/12 rounded-md p-1 px-1.5 transition duration-1000 ease-in transform scale-100"})}O.defaultProps={focusOut:null,searchKeyHandler:null};var g=O,p="HEADER_UPDATE",v="IMAGESDATA_UPDATE",x="GRIDFILTER",y=function(e){return{type:p,payload:e}};function w(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.header})),c=Object(a.useState)(!1),n=Object(l.a)(c,2),r=n[0],s=n[1];return Object(f.jsxs)("div",{className:"flex flex-row ".concat(t.sticky?"sticky top-0 z-10":"absolute"," justify-center items-center space-x-4 p-4 bg-gradient-to-b from-black via-black w-full h-header-height"),children:[Object(f.jsx)("div",{className:"flex-initial flex-shrink-0",children:t.backButton?Object(f.jsx)(j,{img:"Back.png"}):null}),Object(f.jsx)("div",{className:"flex-auto flex-shrink-0 text-left text-white whitespace-nowrap align-middle text-lg font-semibold",children:t.title}),Object(f.jsxs)("div",{className:"flex flex-row flex-initial justify-item-end",onClick:function(){s(!0)},children:[Object(f.jsx)("div",{className:"".concat(t.searchEnabled&&!r?"":"hidden"),children:Object(f.jsx)(j,{img:"search.png"})}),Object(f.jsx)("div",{className:"".concat(t.searchEnabled&&!r?"hidden":""),children:Object(f.jsx)(g,{focusOut:function(){s(!1)},searchKeyHandler:function(t){e({type:x,payload:t})}})})]})]})}w.defaultProps={title:"",backButton:!0,searchEnabled:!0};var k=w,N=c(9),E=c(12),S=c.n(E),D=c(15);function K(e){var t=e.item,c=Object(a.useState)("".concat(u,"/").concat(t["poster-image"])),n=Object(l.a)(c,2),r=n[0],s=n[1];return Object(f.jsxs)("div",{className:"min-w-full flex flex-col justify-start items-start pb-10 overflow-hidden",title:t.name,children:[Object(f.jsx)("img",{src:r,alt:t.name,className:"flex-none w-full h-full pb-2",loading:"lazy",onError:function(){s(d)}}),Object(f.jsx)("div",{className:"flex-none w-full text-left text-gray-400 whitespace-nowrap overflow-hidden overflow-ellipsis",children:t.name})]})}K.defaultProps={item:{}};var A=K;var B=function(){var e=Object(a.useRef)(),t=Object(i.b)(),c=Object(a.useState)(1),n=Object(l.a)(c,2),r=n[0],s=n[1],u=Object(a.useState)([]),d=Object(l.a)(u,2),b=d[0],j=d[1],h=Object(a.useState)([]),m=Object(l.a)(h,2),O=m[0],g=m[1],p=Object(a.useState)(!0),x=Object(l.a)(p,2),w=x[0],k=x[1],E=Object(i.c)((function(e){return e})),K=E.header,B=E.imagesData,C=E.filter;return Object(a.useEffect)((function(){Object(D.a)(S.a.mark((function e(){var c,a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=9;break}return e.next=3,fetch(o+"/page".concat(r,".json"));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(y({title:(null===n||void 0===n||null===(c=n.page)||void 0===c?void 0:c.title)||""})),t({type:v,payload:n});case 9:case"end":return e.stop()}}),e)})))()}),[r]),Object(a.useEffect)((function(){if(B){var e,t=(null===B||void 0===B||null===(e=B.page["content-items"])||void 0===e?void 0:e.content)||[],c=[].concat(Object(N.a)(O),Object(N.a)(t));parseInt(null===B||void 0===B?void 0:B.page["total-content-items"],10)===c.length&&k(!1),j(c),g(c)}}),[B]),Object(a.useEffect)((function(){if(C.searchKey){var e=b.filter((function(e){return e.name.toLowerCase().includes(C.searchKey.toLowerCase())}));g(e)}else g(Object(N.a)(b))}),[C]),Object(f.jsxs)("div",{className:"bg-black w-full h-full overflow-y-auto pb-24",ref:e,onScroll:function(){var c=e.current,a=c.scrollTop,n=a>=3*c.clientHeight*r/4;a>0&&!K.sticky&&t(y({sticky:!0})),n&&s((function(e){return e+1}))},children:[Object(f.jsx)("div",{className:"w-full p-4 grid gap-4 grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 2xl:grid-cols-12",children:O.map((function(e,t){return Object(f.jsx)(A,{item:e},"".concat(e.name.replace(" ",""),"_").concat(t))}))}),w?Object(f.jsx)("div",{className:"hidden md:flex md:flex-row md:justify-center md:item-center md:mb-4",children:Object(f.jsx)("button",{onClick:function(){t(y({sticky:!0})),s((function(e){return e+1}))},className:"p-4 text-white bg-gray-900 hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-600 focus:ring-opacity-50",children:"Load More"})}):null]})};var C=function(){return Object(f.jsxs)("div",{className:"bg-black w-screen h-screen overflow-hidden",children:[Object(f.jsx)(k,{}),Object(f.jsx)(B,{})]})},P=c(8),_=c(2),H={title:"",sticky:!1,backButton:!0,searchEnabled:!0},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;return c===p?Object(_.a)(Object(_.a)({},e),a):e},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;return c===v?Object(_.a)(Object(_.a)({},e),a):e},L={searchKey:""},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;return c===x?Object(_.a)(Object(_.a)({},e),{},{searchKey:a}):e},M=Object(P.a)({header:I,imagesData:T,filter:R});var z=Object(P.b)(M);s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(i.a,{store:z,children:Object(f.jsx)(C,{})})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.9ce8776e.chunk.js.map