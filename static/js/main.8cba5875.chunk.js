(this["webpackJsonpdiagnal-react-workshop"]=this["webpackJsonpdiagnal-react-workshop"]||[]).push([[0],{26:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(6),i=a.n(s),r=a(4),l=(a(26),a(2)),o="https://test.create.diagnal.com/data",u="https://test.create.diagnal.com/images",d="https://test.create.diagnal.com/images/placeholder_for_missing_posters.png",f=a(1);function j(e){var t=e.img;return Object(f.jsx)("img",{src:"".concat(u,"/").concat(t),alt:"back icon",className:"w-5 h-5 transition duration-500 ease-in-out transform hover:scale-110"})}j.defaultProps={img:""};var b=j,h=a(14),m=a.n(h);function p(e){var t=e.focusOut,a=e.searchKeyHandler,n=Object(c.useState)(""),s=Object(l.a)(n,2),i=s[0],r=s[1],o=Object(c.useCallback)(m()(a,300),[]);return Object(f.jsx)("input",{value:i,onChange:function(e){var t=e.target.value;r(t),o(t)},onBlur:t,className:"w-11/12 rounded-md p-1 px-1.5 transition duration-1000 ease-in transform scale-100"})}p.defaultProps={focusOut:null,searchKeyHandler:null};var O=p,g="HEADER_UPDATE",x="IMAGESDATA_UPDATE",v="GRIDFILTER",y=function(e){return{type:g,payload:e}};function w(){var e=Object(r.b)(),t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],s=a[1],i=Object(r.c)((function(e){return e.header})),o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1];return Object(f.jsxs)("div",{className:"flex flex-row ".concat(i.sticky?"sticky top-0 z-10":"absolute"," justify-center items-center space-x-4 p-4 bg-gradient-to-b from-black via-black w-full h-header-height"),children:[Object(f.jsx)("div",{className:"flex-initial flex-shrink-0",children:i.backButton?Object(f.jsx)(b,{img:"Back.png"}):null}),Object(f.jsx)("div",{className:"flex-auto flex-shrink-0 text-left text-white whitespace-nowrap align-middle text-lg font-semibold",children:i.title}),Object(f.jsxs)("div",{className:"flex flex-row flex-initial justify-end",onClick:function(){j(!0)},children:[Object(f.jsxs)("div",{className:"".concat(i.searchEnabled&&!d?"":"hidden"," flex flex-row flex-initial justify-end items-end space-x-2"),children:[Object(f.jsx)("span",{className:"w-36 text-white whitespace-nowrap overflow-hidden overflow-ellipsis",children:n}),Object(f.jsx)(b,{img:"search.png"})]}),Object(f.jsx)("div",{className:"".concat(i.searchEnabled&&!d?"hidden":""," flex flex-initial justify-end items-end"),children:Object(f.jsx)(O,{focusOut:function(){j(!1)},searchKeyHandler:function(t){s(t),e({type:v,payload:t})}})})]})]})}w.defaultProps={title:"",backButton:!0,searchEnabled:!0};var k=w,N=a(9),E=a(12),S=a.n(E),D=a(15);function K(e){var t=e.item,a=Object(c.useState)("".concat(u,"/").concat(t["poster-image"])),n=Object(l.a)(a,2),s=n[0],i=n[1];return Object(f.jsxs)("div",{className:"min-w-full flex flex-col justify-start items-start pb-10 overflow-hidden",title:t.name,children:[Object(f.jsx)("img",{src:s,alt:t.name,className:"flex-none w-full h-full pb-2",loading:"lazy",onError:function(){i(d)}}),Object(f.jsx)("div",{className:"flex-none w-full text-left text-gray-400 whitespace-nowrap overflow-hidden overflow-ellipsis",children:t.name})]})}K.defaultProps={item:{}};var A=K;var B=function(){var e=Object(c.useRef)(),t=Object(r.b)(),a=Object(c.useState)(1),n=Object(l.a)(a,2),s=n[0],i=n[1],u=Object(c.useState)([]),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)([]),m=Object(l.a)(h,2),p=m[0],O=m[1],g=Object(c.useState)(!0),v=Object(l.a)(g,2),w=v[0],k=v[1],E=Object(r.c)((function(e){return e})),K=E.header,B=E.imagesData,C=E.filter;return Object(c.useEffect)((function(){Object(D.a)(S.a.mark((function e(){var a,c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=9;break}return e.next=3,fetch(o+"/page".concat(s,".json"));case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,t(y({title:(null===n||void 0===n||null===(a=n.page)||void 0===a?void 0:a.title)||""})),t({type:x,payload:n});case 9:case"end":return e.stop()}}),e)})))()}),[s]),Object(c.useEffect)((function(){if(B){var e,t=(null===B||void 0===B||null===(e=B.page["content-items"])||void 0===e?void 0:e.content)||[],a=[].concat(Object(N.a)(p),Object(N.a)(t));parseInt(null===B||void 0===B?void 0:B.page["total-content-items"],10)===a.length&&k(!1),b(a),O(a)}}),[B]),Object(c.useEffect)((function(){if(C.searchKey){var e=j.filter((function(e){return e.name.toLowerCase().includes(C.searchKey.toLowerCase())}));O(e)}else O(Object(N.a)(j))}),[C]),Object(f.jsxs)("div",{className:"bg-black w-full h-full overflow-y-auto pb-24",ref:e,onScroll:function(){var a=e.current,c=a.scrollTop,n=c>=3*a.clientHeight*s/4;c>0&&!K.sticky&&t(y({sticky:!0})),n&&i((function(e){return e+1}))},children:[Object(f.jsx)("div",{className:"w-full p-4 grid gap-4 grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 2xl:grid-cols-12",children:p.map((function(e,t){return Object(f.jsx)(A,{item:e},"".concat(e.name.replace(" ",""),"_").concat(t))}))}),p.length&&w?Object(f.jsx)("div",{className:"hidden md:flex md:flex-row md:justify-center md:item-center md:mb-4",children:Object(f.jsx)("button",{onClick:function(){t(y({sticky:!0})),i((function(e){return e+1}))},className:"p-4 text-white bg-gray-900 hover:bg-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-600 focus:ring-opacity-50",children:"Load More"})}):null]})};var C=function(){return Object(f.jsxs)("div",{className:"bg-black w-screen h-screen overflow-hidden",children:[Object(f.jsx)(k,{}),Object(f.jsx)(B,{})]})},P=a(8),_=a(3),H={title:"",sticky:!1,backButton:!0,searchEnabled:!0},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;return a===g?Object(_.a)(Object(_.a)({},e),c):e},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;return a===x?Object(_.a)(Object(_.a)({},e),c):e},L={searchKey:""},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;return a===v?Object(_.a)(Object(_.a)({},e),{},{searchKey:c}):e},M=Object(P.a)({header:I,imagesData:T,filter:R});var z=Object(P.b)(M);i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(r.a,{store:z,children:Object(f.jsx)(C,{})})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.8cba5875.chunk.js.map